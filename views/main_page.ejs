<%- include('header') %> <%- include('navbar') %>
<html>
  <body>
    <h1>Latest song!</h1>
    <h2>welcome back, <%=username%></h2>
    <form action="/search" class="row" method="POST">
      <input
        class="col-4"
        type="text"
        name="search"
        placeholder="search for songs or artist"
        required
      />
      <input class="col-1" type="submit" value="Search" />
    </form>
      <% if(typeof response === 'undefined'){ %>
           <% console.log('respone not stated') %>
       <% } else{ %>
            <h5 class="row text-danger"><%=response%></h2>
      <% }; %>
    <h3 class="mt-5">Artist</h3>
    <div class="scrolling-wrapper">
      <% artist.forEach((artist, index) => {%>
      <div class="card">
        <img
          style="width: 250px"
          src="/images/<%=artist.img%>.png"
          class="img-thumbnail row me-3"
          alt="..."
        />
        <div class="row">
          <a class="fs-5 fw-bold text-center"href="/artist/<%=artist.img%>"><%=artist.name%></a>
        </div>
      </div>
      <% }); %>
    </div>
 <br /><br /> <br /><br />
<div class="row">
     <a class="btn btn-light col-4 px-3 py-3 fs-4 fw-bold" href="/genre/English" role="button">English</a>
     <a class="btn btn-light col-4 px-3 py-3 fs-4 fw-bold" href="/genre/Mandarin" role="button">Mandarin</a>
     <a class="btn btn-light col-4 px-3 py-3 fs-4 fw-bold" href="/genre/Korean" role="button">Korean</a>
    </div>
    <br /><br />
</div> 
   <div class="row">
     <a class="btn btn-primary col-4 px-3 py-3 fs-4 fw-bold" href="/genre/ROCK" role="button">ROCK</a>
     <a class="btn btn-secondary col-4 px-3 py-3 fs-4 fw-bold" href="/genre/R&B" role="button">R&B</a>
     <a class="btn btn-success col-4 px-3 py-3 fs-4 fw-bold" href="/genre/POP" role="button">POP</a>
     <a class="btn btn-danger col-4 px-3 py-3 fs-4 fw-bold" href="/genre/HIPHOP" role="button">HIP HOP</a>
     <a class="btn btn-warning col-4 px-3 py-3 fs-4 fw-bold" href="/genre/CLASSIC" role="button">CLASSIC</a>
     <a class="btn btn-info col-4 px-3 py-3 fs-4 fw-bold" href="/genre/BLUES" role="button">BLUES</a>
     <a class="btn btn-dark col-4 px-3 py-3 fs-4 fw-bold" href="/genre/MOOD" role="button">MOOD</a>
    </div>
    <br /><br />

    <% allNotes.forEach((a, index) => {%>
    <div class="row border mt-3">
      <img
        src="/images/<%=a.img%>.png"
        class="img-thumbnail col-3 me-3"
        alt="..."
      />
      <div class="col mt-3">
        <div class="row fw-bold fs-3">
          <a href="/music/<%=a.id%>"><%=a.title%></a>
        </div>
        <div class="row">
          <div class="col-1 mt-2">Artist:</div>
          <div class="col mt-2">
            <a href="/artist/<%=a.img%>"><%=a.name%></a>
          </div>
        </div>
        <div class="row text-start">
          <div class="col">Duration: <%=a.duration%></div>
        </div>
        <div class="row">
          <div class="col-2">uploaded by:</div>
          <div class="col">
            <a href="/user/<%=a.username%>"><%=a.username%></a>
          </div>
        </div>
        <div class="row">
          <div class="col-1">Genre:</div>
          <%genre.forEach((b)=>{%> <%if(a.id === b.song_id){%>
          <div class="col-1"><%=b.name%></div>
          <%}});%>
        </div>
        <div class="row">
          <a class="col mt-3" href="<%= a.link %>" target="_blank"
            >YouTube link</a
          >
        </div>
        <div class="dropdow col mt-3">
            <button
              class="btn btn-secondary dropdown-toggle btn-sm"
              type="button"
              id="dropdownMenuButton1"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              Add to playlist
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
              <%playlist.forEach((b)=>{%>
              <li>
                <a
                  class="dropdown-item"
                  href="/playlist/add/<%=b.id%>/<%=a.id%>"
                  ><%=b.title%></a
                >
              </li>

              <%});%>
            </ul>
        </div>        
      </div>
    </div>
    <% }); %>
  </body>
</html>
<%- include ('footer') %>
